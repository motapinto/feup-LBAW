"use strict";const token=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),addFeedbackEventListeners=()=>{document.querySelectorAll(".modal-feedback-opener").forEach(e=>{let t=e.getAttribute("data-key-id"),n=e.getAttribute("data-order-number");e.addEventListener("click",function(){leaveFeedback(t,n)})}),document.querySelectorAll(".modal-report-opener").forEach(e=>{let t=e.getAttribute("data-key-id"),n=e.getAttribute("data-order-number");e.addEventListener("click",function(){giveReport(t,n)})}),document.querySelector("#clipboard-copy").addEventListener("click",copyToClipBoard)},sendGet=e=>{return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json, text-plain, */*","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":token},method:"get",credentials:"same-origin"}).then(e=>e.json()).catch(e=>console.error("Error: "+e))},sendPut=(e,t)=>{const n={headers:{"Content-Type":"application/json",Accept:"application/json, text-plain, */*","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":token},method:"put",credentials:"same-origin",body:JSON.stringify(e)};return fetch(t,n).then(e=>e.json()).catch(e=>console.error("Error: "+e))},getKeyInfo=(e,t,n)=>{sendGet("/api/key/"+e).then(function(e){if("feedback"===t?(usernamePlaceHolderFeedback.innerHTML=usernameOriginalContentFeedback+e.seller.username,pricePlaceHolderFeedback.innerHTML=priceOriginalContentFeedback+e.offer.price,productNamePlaceHolderFeedback.innerHTML=productNameOriginalContentFeedback+e.product.name,approvalRatePlaceHolderFeedback.innerHTML=approvalRateOriginalContentFeedback+e.seller.rating,numSellsPlaceHolderFeedback.innerHTML=numSellsOriginalContentFeedback+e.seller.num_sells,orderNumberPlaceHolderFeedback.innerHTML=orderNumberOriginalContentFeedback+n,commentPlaceHolder.innerHTML=commentOriginalContent):"report"===t&&(usernamePlaceHolderReport.innerHTML=usernameOriginalContentReport+e.seller.username,pricePlaceHolderReport.innerHTML=priceOriginalContentReport+e.offer.price,productNamePlaceHolderReport.innerHTML=productNameOriginalContentReport+e.product.name,approvalRatePlaceHolderReport.innerHTML=approvalRateOriginalContentReport+e.seller.rating,numSellsPlaceHolderReport.innerHTML=numSellsOriginalContentReport+e.seller.num_sells,orderNumberPlaceHolderReport.innerHTML=orderNumberOriginalContentReport+n,commentPlaceHolder.innerHTML=commentOriginalContent),"feedback"===t&&null!==e.feedback){document.querySelector("#feedback-response").innerHTML="",submitButtonFeedback.remove(),commentPlaceHolder.innerHTML=e.feedback.comment,e.feedback.evaluation?(negativeButtonContainer.contains(negativeButton)&&negativeButton.remove(),positiveButtonContainer.contains(positiveButton)||positiveButtonContainer.append(positiveButton)):(positiveButtonContainer.contains(positiveButton)&&positiveButton.remove(),negativeButtonContainer.contains(negativeButton)||negativeButtonContainer.append(negativeButton))}else{document.querySelector("#feedback-response").innerHTML="",document.body.contains(submitButtonFeedback)||submitButtonContainerFeedback.append(submitButtonFeedback),positiveButtonContainer.contains(positiveButton)||positiveButtonContainer.append(positiveButton),negativeButtonContainer.contains(negativeButton)||negativeButtonContainer.append(negativeButton),negativeButton.classList.remove("bg-aux"),positiveButton.classList.remove("bg-aux1"),commentPlaceHolder.innerHTML=commentOriginalContent}})},clipboard=document.querySelector("#clipboard-copy"),copyToClipBoard=()=>{const e=document.querySelector("#key-val");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")},orderNumberPlaceHolderFeedback=document.querySelector("#orderNumber-feedback"),orderNumberOriginalContentFeedback=orderNumberPlaceHolderFeedback.innerHTML,usernamePlaceHolderFeedback=document.querySelector("#username-feedback"),usernameOriginalContentFeedback=usernamePlaceHolderFeedback.innerHTML,pricePlaceHolderFeedback=document.querySelector("#price-feedback"),priceOriginalContentFeedback=pricePlaceHolderFeedback.innerHTML,productNamePlaceHolderFeedback=document.querySelector("#productName-feedback"),productNameOriginalContentFeedback=productNamePlaceHolderFeedback.innerHTML,approvalRatePlaceHolderFeedback=document.querySelector("#approvalRate-feedback"),approvalRateOriginalContentFeedback=approvalRatePlaceHolderFeedback.innerHTML,numSellsPlaceHolderFeedback=document.querySelector("#numSells-feedback"),numSellsOriginalContentFeedback=numSellsPlaceHolderFeedback.innerHTML,submitButtonContainerFeedback=document.querySelector("#submit-button-container-feedback"),submitButtonFeedback=document.querySelector("#submitButtonFeedback");let evaluation=null;const positiveButton=document.querySelector("#buttonPositive"),positiveButtonContainer=document.querySelector("#positive-button-container"),negativeButton=document.querySelector("#buttonNegative"),negativeButtonContainer=document.querySelector("#negative-button-container"),positiveThumb=document.querySelector("#positive-thumb"),negativeThumb=document.querySelector("#negative-thumb"),commentPlaceHolder=document.querySelector("#comment"),commentOriginalContent=commentPlaceHolder.innerHTML,leaveFeedback=(e,t)=>{positiveButton.addEventListener("click",buttonPositiveClick),negativeButton.addEventListener("click",buttonNegativeClick),getKeyInfo(e,"feedback",t),submitButtonFeedback.addEventListener("click",function(){submitComment(e)})},buttonPositiveClick=()=>{evaluation=!0,positiveButton.classList.add("bg-aux1"),positiveThumb.classList.add("cl-white"),negativeButton.classList.remove("bg-aux"),negativeThumb.classList.remove("cl-white")},buttonNegativeClick=()=>{evaluation=!1,negativeButton.classList.add("bg-aux"),negativeThumb.classList.add("cl-white"),positiveButton.classList.remove("bg-aux1"),positiveThumb.classList.remove("cl-white")},submitComment=e=>{let t={comment:commentPlaceHolder.value,evaluation:evaluation,key:e};sendPut(t,"/key/"+t.key+"/feedback").then(function(){t.evaluation&&negativeButtonContainer.contains(negativeButton)?negativeButton.remove():positiveButtonContainer.contains(positiveButton)&&positiveButton.remove(),submitButtonFeedback.remove();const e=document.querySelector("#feedback-response");e.innerHTML="Submited feedback successfully",e.style.color="green",e.style.textAlign="left"}).catch(function(){const e=document.querySelector("#feedback-response");void 0!==res.errors[0]?e.innerHTML=res.errors[0]:e.innerHTML="Error while submitting feedback",e.style.color="red",e.style.textAlign="left"})},orderNumberPlaceHolderReport=document.querySelector("#orderNumber-report"),orderNumberOriginalContentReport=orderNumberPlaceHolderReport.innerHTML,usernamePlaceHolderReport=document.querySelector("#username-report"),usernameOriginalContentReport=usernamePlaceHolderReport.innerHTML,pricePlaceHolderReport=document.querySelector("#price-report"),priceOriginalContentReport=pricePlaceHolderReport.innerHTML,productNamePlaceHolderReport=document.querySelector("#productName-report"),productNameOriginalContentReport=productNamePlaceHolderReport.innerHTML,approvalRatePlaceHolderReport=document.querySelector("#approvalRate-report"),approvalRateOriginalContentReport=approvalRatePlaceHolderReport.innerHTML,numSellsPlaceHolderReport=document.querySelector("#numSells-report"),numSellsOriginalContentReport=numSellsPlaceHolderReport.innerHTML,submitButtonContainerReport=document.querySelector("#submit-button-container-report"),submitButtonReport=document.querySelector("#submitButtonReport"),giveReport=(e,t)=>{submitButtonReport.addEventListener("click",function(){submitReport(e)}),getKeyInfo(e,"report",t)},submitReport=e=>{let t={key:e,title:document.querySelector("#report-title").value,description:document.querySelector("#report-description").value};sendPut(t,"/key/"+t.key+"/report").then(function(e){})};document.querySelectorAll(".modal-feedback-opener").forEach(e=>{let t=e.getAttribute("data-key-id"),n=e.getAttribute("data-order-number");e.addEventListener("click",function(){leaveFeedback(t,n)})}),document.querySelectorAll(".modal-report-opener").forEach(e=>{let t=e.getAttribute("data-key-id"),n=e.getAttribute("data-order-number");e.addEventListener("click",function(){giveReport(t,n)})}),document.querySelector("#clipboard-copy").addEventListener("click",copyToClipBoard);